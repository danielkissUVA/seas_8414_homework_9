## Manual Verification Steps for the DGA Detection Pipeline
This guide provides steps to manually test the end-to-end functionality of the DGA detection and incident response pipeline. You will verify that the system correctly classifies both legitimate and DGA domains and generates an appropriate playbook for malicious ones.

### Prerequisites

1. You have successfully completed the setup and model training steps.

2. The `model/` directory with DGA_Leader.zip exists in your project's root folder.

3. Your GEMINI_API_KEY is configured in a `.env` file.

#### Step 1: Test with a Legitimate Domain

First, we will test the pipeline with a known legitimate domain. The expected output is a correct classification without the generation of a playbook.

**Command**:
`python 2_analyze_domain.py --domain google.com`

**Expected Output**:
The script should classify google.com as legit. You will see the prediction probabilities, but the script will stop before generating a playbook because the domain is not classified as a DGA. The output should look similar to this:

`Initializing H2O...`

`Loading MOJO model from model/DGA_Leader.zip...`

`Analyzing domain: google.com`

`Making a prediction...`

`--- Prediction Results ---`

`Domain: google.com`

`Predicted Class: legit`

`Probability (Legit): 0.9999`

`Probability (DGA): 0.0001`

`--------------------------'

`Shutting down H2O...`

#### Step 2: Test with a DGA Domain

Next, we will test the pipeline with a known DGA-like domain. The expected output is a dga classification, a SHAP-based explanation, and a prescriptive incident response playbook generated by the Gemini API.

**Command**:
`python 2_analyze_domain.py --domain hjdgsf787gshhshshxnx.com`

**Expected Output**:
The script will classify the domain as dga. You will see the prediction results, followed by an XAI Explanation detailing the features that influenced the model's decision. The script will then call the generative AI model to create and print a step-by-step Prescriptive Playbook based on those findings. The output should be similar to this:

`Initializing H2O...`

`Loading MOJO model from model/DGA_Leader.zip...`

`Analyzing domain: hjdgsf787gshhshshxnx.com`

`Making a prediction...`

`--- Prediction Results ---`

`Domain: hjdgsf787gshhshshxnx.com`

`Predicted Class: dga`

`Probability (Legit): 0.0001`

`Probability (DGA): 0.9999`

`--------------------------`

`--- Generating XAI Explanation (SHAP) ---`

`- Alert: Potential DGA domain detected.`

`- Domain: hjdgsf787gshhshshxnx.com`

`- AI Model Explanation (from SHAP): The model flagged this domain with 100.0% confidence. The classification was primarily driven by:`

`  - A high 'entropy' value of 3.86 (which strongly pushed the prediction towards 'dga').`

`  - A high 'length' value of 27.00 (which strongly pushed the prediction towards 'dga').`

` --- Generating Prescriptive Playbook ---`

`...`